#!/bin/bash

# Run commands in the background
# Credit: http://stackoverflow.com/a/15578203

kill_existing() {
  KILL_APPS=(
    'apache2'
    'nginx'
    'mysql'
    'grunt'
  )
  for APP in "${KILL_APPS[@]}"; do
    PID=$(ps aux | grep "${APP}" | grep -v grep | awk '{print $2}')
    if [[ $PID ]]; then
      sudo kill $PID &
    fi
  done
}

grunt_watch() {
  cd ${SITE_DIR}/bedrock && grunt watch &
}

docker_compose() {
  if [ $PLATFORM == "osx" ]; then
    boot2docker up 2>/dev/null
    eval $(boot2docker shellinit)
    cd ${SITE_DIR}/docker && docker-compose up &
  else
    cd ${SITE_DIR}/docker && sudo docker-compose up &
  fi
}
