#!/bin/bash

# Run commands in the background
# Credit: http://stackoverflow.com/a/15578203

grunt_watch() {
  # Credit: http://unix.stackexchange.com/a/74186
  PID_MYSQL=$(ps aux | grep "[m]ysql" | awk '{print $2}')
  if [ $PID_MYSQL ]; then
    kill $PID_MYSQL &
  fi
  PID_GRUNT=$(ps aux | grep "[g]runt" | awk '{print $2}')
  if [ $PID_GRUNT ]; then
    kill $PID_GRUNT &
  fi
  cd ${SITE_DIR}/bedrock && grunt watch &
}

docker_compose() {
  if [ $PLATFORM == "osx" ]; then
    boot2docker up 2>/dev/null
    eval $(boot2docker shellinit)
    cd ${SITE_DIR}/docker && docker-compose up &
  else
    cd ${SITE_DIR}/docker && sudo docker-compose up &
  fi
}
