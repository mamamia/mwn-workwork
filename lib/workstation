#!/bin/bash

# Docker-compose pre-release (pre-release to fig for now but has some useful functionality)
# https://github.com/docker/fig/releases
check_docker_compose() {
  save_cursor; display_status_secondary "INFO" "[ Installing docker-compose... ]"
  if ! type_exists 'docker-compose'; then
    curl --silent -L https://github.com/docker/fig/releases/download/1.1.0-rc2/docker-compose-`uname -s`-`uname -m` > /tmp/docker-compose && \
    sudo mv /tmp/docker-compose /usr/local/bin/docker-compose && \
    sudo chmod 755 /usr/local/bin/docker-compose
  fi
  replace_line; display_status_secondary "PASS" "Located docker-compose"
}

# Check if ansible is installed
check_ansible() {
  save_cursor; display_status_secondary "INFO" "[ Installing ansible... ]"
  if ! type_exists 'ansible'; then
    install_app ansible
  fi
  replace_line; display_status_secondary "PASS" "Located ansible"
}

# Run ansible playbook
run_ansible_playbook() {
  display_status_secondary "INFO" "[ Running ansible-playbook... ]"
  ansible-playbook "${WW_DIR}/ansible/workstation.yml" -i "${WW_DIR}/ansible/hosts" --ask-sudo-pass
}
